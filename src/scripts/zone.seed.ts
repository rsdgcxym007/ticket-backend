import { NestFactory } from '@nestjs/core';
import { AppModule } from '../app.module';
import { ZoneService } from '../zone/zone.service';
import { CreateZoneDto } from '../zone/dto/create-zone.dto';

async function bootstrap() {
  const app = await NestFactory.createApplicationContext(AppModule);
  const zoneService = app.get(ZoneService);

  const zones: CreateZoneDto[] = [
    {
      name: 'back-left',
      seatMap: [
        ['470', '471', '472', '473', '474', '475', '476', '477', '478'],
        ['451', '452', '453', '454', '455', '456', '457', '458'],
        ['435', '436', '437', '438', '439', '440', '441'],
        ['421', '422', '423', '424', '425', '426'],
        ['409', '410', '411', '412', '413'],
        ['401', '402', '403', '404'],
      ],
    },
    {
      name: 'back-right',
      seatMap: [
        ['482', '483', '484', '485', '486', '487', '488', '489', '490', '491'],
        ['461', '462', '463', '464', '465', '466', '467', '468'],
        ['444', '445', '446', '447', '448', '449', '450'],
        ['429', '430', '431', '432', '433', '434'],
        ['416', '417', '418', '419', '420'],
        ['407', '408'],
      ],
    },
    {
      name: 'left',
      seatMap: [
        ['386'],
        ['385', '363', '343'],
        ['384', '362', '342', '324', ,],
        ['383', '361', '341', '323', ,],
        ['382', '360', '340', '322', ,],
        ['381', '359', '339', '321', ,],
        ['380', '358', '338', '320', '309'],
        ['379', '357', '337', '319', '308'],
        ['378', '356', '336', '318', '307'],
        ['377', '355', '335', '317', '306'],
        ['376', '354', '334', '316', '305'],
        ['375'],
        ['374', '353', '333', '315', '304'],
        ['373', '352', '332', '314', '303'],
        ['372', '351', '331', '313', '302'],
        ['371', '350', '330', '312', '301'],
        ['370', '349', '329', '311', ,],
        ['369', '348', '328', '310', ,],
        ['368', '347', '327'],
        ['367', '346', '326'],
        ['366', '345', '325'],
        ['365', '344', ,],
        ['364'],
      ],
    },
    {
      name: 'right',
      seatMap: [
        ['124', '143', '163'],
        ['125', '144', '164'],
        ['126', '145', '165'],
        ['127', '146', '166'],
        ['110', '128', '147', '167'],
        ['111', '129', '148', '168'],
        ['101', '112', '130', '149', '169'],
        ['102', '113', '131', '150', '170'],
        ['103', '114', '132', '151', '171'],
        ['104', '115', '133', '152', '172'],
        ['173'],
        ['105', '116', '134', '153', '174'],
        ['106', '117', '135', '154', '175'],
        ['107', '118', '136', '155', '176'],
        ['108', '119', '137', '156', '177'],
        ['109', '120', '138', '157', '178'],
        ['121', '139', '158', '179'],
        ['122', '140', '159', '180'],
        ['123', '141', '160', '181'],
        ['142', '161', '182'],
        ['162', '183'],
        ['184'],
        ['185'],
      ],
    },
    {
      name: 'front-ringside',
      seatMap: [
        ['204', '203', '202', '201'],
        [
          '220',
          '219',
          '218',
          '217',
          '216',
          '215',
          '214',
          '213',
          '212',
          '211',
          '210',
          '209',
          '208',
          '207',
          '206',
        ],

        [
          '236',
          '235',
          '234',
          '233',
          '232',
          '231',
          '230',
          '229',
          '228',
          '227',
          '226',
          '225',
          '224',
          '223',
          '222',
          '221',
        ],

        [
          '252',
          '251',
          '250',
          '249',
          '248',
          '247',
          '246',
          '245',
          '244',
          '243',
          '242',
          '241',
          '240',
          '239',
          '238',
          '237',
        ],
        [
          '268',
          '267',
          '266',
          '265',
          '264',
          '263',
          '262',
          '261',
          '260',
          '259',
          '258',
          '257',
          '256',
          '255',
          '254',
          '253',
        ],
      ],
    },
  ];

  for (const z of zones) {
    const found = await zoneService.findAll();
    if (!found.find((zone) => zone.name === z.name)) {
      await zoneService.create(z);
      console.log(`âœ… Zone created: ${z.name}`);
    }
  }

  await app.close();
}
bootstrap();
